"0","#this chunk does the percentages for the totals for a given conference"
"0","#""currdoing"" = 2 does pc_chairs, 3 does pc_members, 4 does session_chair, 5 does panelist, 6 does keynote_speaker, 7 does authors"
"0","conferences = list(""ASPLOS"", ""ATC"", ""CCGrid"", ""CCS"", ""CIDR"", ""CLOUD"", ""Cluster"", ""CoNEXT"", ""EuroPar"",  ""EuroSys"", ""FAST"", ""HCW"", ""HiPC"", ""HotCloud"", ""HotI"", ""HotOS"", ""HotStorage"", ""HPCA"", ""HPCC"", ""HPDC"", ""ICAC"", ""ICDM"", ""ICPE"", ""ICPP"", ""IGSC"", ""IISWC"", ""IMC"", ""IPDPS"", ""ISC"", ""ISCA"", ""ISPASS"", ""KDD"", ""MASCOTS"", ""MICRO"", ""Middleware"", ""MobiCom"", ""NDSS"", ""NSDI"", ""OOPSLA"", ""PACT"", ""PLDI"", ""PODC"", ""PODS"", ""PPoPP"", ""SC"", ""SIGCOMM"", ""SIGIR"", ""SIGMETRICS"", ""SIGMOD"", ""SLE"", ""SOCC"", ""SOSP"", ""SP"", ""SPAA"", ""SYSTOR"", ""VEE"")"
"0","double_blind = c(""Y"",""N"",""N"",""Y"",""N"",""N"",""N"",""N"",""N"",""Y"",""Y"",""N"",""N"",""N"",""N"",""N"",""N"",""N"",""N"",""N"",""N"",""Y"",""N"",""N"",""N"",""Y"",""N"",""N"",""Y"",""Y"",""Y"",""N"",""N"",""Y"",""Y"",""Y"",""Y"",""Y"",""Y"",""Y"",""Y"",""N"",""N"",""Y"",""Y"",""Y"",""N"",""Y"",""Y"",""N"",""N"",""Y"",""Y"",""N"",""N"",""Y"",""NA"",""NA"")"
"0","#CHOOSE YR CONFERENCE"
"0","#conferences = list(""SIGCOMM"")"
"0","#CHOOSE YR CONFERENCE"
"0","#checking <- subset(data, gs_email ==""@monash.edu"" & data$pcs %like% ""CCGrid"")"
"0","#data <-read.csv(""persons.csv"", na.strings=c("" ""))"
"0","currdoing = 2"
"0","corrplot <- c()"
"0","while (currdoing <= 7){"
"0","filekey = """""
"0","keyword = """""
"0","outlist <- list()"
"0","conf_names <- c()"
"0","percentages <- c()"
"0","Fpercentages <- c()"
"0","ratios <- c()"
"0","conf_namess <- c()"
"0","shade <- c()"
"0","#currdoing = 2"
"0","keywordmaker <- function(curr) {"
"0","  if(curr == '2') ""PC Chairs"""
"0","  else if (curr == '3') ""PC Members"""
"0","  else if (curr == '4') ""Session Chairs"""
"0","  else if (curr == '5') ""Panelists"""
"0","  else if (curr == '6') ""Keynote Speakers"""
"0","  else if (curr == '7') ""Authors"""
"0","}"
"0","keyword = keywordmaker(currdoing)"
"0","#filekey = ""fract"""
"0","filekey = paste(filekey, keyword, sep = """")"
"0","i = 1"
"0","for (conf in conferences){"
"0","T_g <- subset(data, (data$pc_chairs %like% conf) | (data$pcs %like% conf) | (data$session_chairs %like% conf) | (data$panels %like% conf) | (data$keynotes %like% conf) | (data$papers %like% conf))"
"0","M_g <- subset(T_g, gender ==""M"")"
"0","F_g <- subset(T_g, gender==""F"")"
"0","NA_g <- subset(T_g, gender==""NA"")"
"0","T_pc_chair <- subset(data, data$pc_chairs %like% conf)"
"0","M_pc_chair <- subset(T_pc_chair, gender==""M"")"
"0","F_pc_chair <- subset(T_pc_chair, gender==""F"")"
"0","NA_pc_chair <- subset(T_pc_chair, gender==""NA"")"
"0","T_pc <- subset(data, data$pcs %like% conf)"
"0","M_pc <- subset(T_pc, gender==""M"")"
"0","F_pc <- subset(T_pc, gender==""F"")"
"0","NA_pc <- subset(T_pc, gender==""NA"")"
"0","T_session_chair <- subset(data, data$session_chairs %like% conf)"
"0","M_session_chair <- subset(T_session_chair, gender==""M"")"
"0","F_session_chair <- subset(T_session_chair, gender==""F"")"
"0","NA_session_chair <- subset(T_session_chair, gender==""NA"")"
"0","T_panelist <- subset(data, data$panels %like% conf)"
"0","M_panelist <- subset(T_panelist, gender==""M"")"
"0","F_panelist <- subset(T_panelist, gender==""F"")"
"0","NA_panelist <- subset(T_panelist, gender==""NA"")"
"0","T_keynote_speaker <- subset(data, data$keynotes %like% conf)"
"0","M_keynote_speaker <- subset(T_keynote_speaker, gender==""M"")"
"0","F_keynote_speaker <- subset(T_keynote_speaker, gender==""F"")"
"0","NA_keynote_speaker <- subset(T_keynote_speaker, gender==""NA"")"
"0","T_author <- subset(data, data$papers %like% conf)"
"0","M_author <- subset(T_author, gender==""M"")"
"0","F_author <- subset(T_author, gender==""F"")"
"0","NA_author <- subset(T_author, gender==""NA"")"
"0","total = ""Total"""
"0","pc_chair = ""pc_chair"""
"0","pc = ""pc"""
"0","session_chair = ""session_chair"""
"0","panelist = ""panelist"""
"0","keynote_speaker = ""keynote_speaker"""
"0","author = ""author"""
"0","frame_roles = c(total, pc_chair, pc, session_chair, panelist, keynote_speaker, author)"
"0","frame_totals = c(nrow(T_g), nrow(T_pc_chair), nrow(T_pc), nrow(T_session_chair), nrow(T_panelist), nrow(T_keynote_speaker), nrow(T_author))"
"0","frame_Ms = c(nrow(M_g), nrow(M_pc_chair), nrow(M_pc), nrow(M_session_chair), nrow(M_panelist), nrow(M_keynote_speaker), nrow(M_author))"
"0","frame_Mps = c((nrow(M_g)/nrow(T_g)*100), (nrow(M_pc_chair)/nrow(T_pc_chair)*100), (nrow(M_pc)/nrow(T_pc)*100), (nrow(M_session_chair)/nrow(T_session_chair)*100), (nrow(M_panelist)/nrow(T_panelist)*100), (nrow(M_keynote_speaker)/nrow(T_keynote_speaker)*100), (nrow(M_author)/nrow(T_author)*100))"
"0","frame_Fs = c(nrow(F_g), nrow(F_pc_chair), nrow(F_pc), nrow(F_session_chair), nrow(F_panelist), nrow(F_keynote_speaker), nrow(F_author))"
"0","frame_Fps = c((nrow(F_g)/nrow(T_g)*100), (nrow(F_pc_chair)/nrow(T_pc_chair)*100), (nrow(F_pc)/nrow(T_pc)*100), (nrow(F_session_chair)/nrow(T_session_chair)*100), (nrow(F_panelist)/nrow(T_panelist)*100), (nrow(F_keynote_speaker)/nrow(T_keynote_speaker)*100), (nrow(F_author)/nrow(T_author)*100))"
"0","frame_NAs = c(nrow(NA_g), nrow(NA_pc_chair), nrow(NA_pc), nrow(NA_session_chair), nrow(NA_panelist), nrow(NA_keynote_speaker), nrow(NA_author))"
"0","frame_NAps = c((nrow(NA_g)/nrow(T_g)*100), (nrow(NA_pc_chair)/nrow(T_pc_chair)*100), (nrow(NA_pc)/nrow(T_pc)*100), (nrow(NA_session_chair)/nrow(T_session_chair)*100), (nrow(NA_panelist)/nrow(T_panelist)*100), (nrow(NA_keynote_speaker)/nrow(T_keynote_speaker)*100), (nrow(NA_author)/nrow(T_author)*100))"
"0","conf_name <- conf"
"0","#frame_checkerrors = c(frame_Ms + frame_Fs + frame_NAs - frame_totals)"
"0","#frame_checkerrorps = c(frame_Mps + frame_Fps + frame_NAps - 100)"
"0","#emp.data <- data.frame(conf_name, frame_roles, frame_totals, frame_Ms, frame_Mps, frame_Fs, frame_Fps, frame_NAs, frame_NAps, frame_checkerrors, frame_checkerrorps)"
"0","emp.data <- data.frame(conf_name, frame_roles, frame_totals, frame_Ms, frame_Mps, frame_Fs, frame_Fps, frame_NAs, frame_NAps)"
"0","is.num <- sapply(emp.data, is.numeric)"
"0","emp.data[is.num] <- lapply(emp.data[is.num], round, 2)"
"0","colnames(emp.data) <- c(""Conf Name"", ""Role"", ""Totals"", ""  Ms"", "" M_%s"", ""  Fs"", "" F_%s"", ""  NAs"", "" NA_%s"")"
"0","conf_names <- c(conf_names, rep(conf_name,3))"
"0","Mpc = (emp.data[currdoing,5])"
"0","Fpc = (emp.data[currdoing,7])"
"0","NApc = (emp.data[currdoing,9])"
"0","percentages <- c(percentages, Mpc, Fpc, NApc)"
"0","Fpercentages <- c(Fpercentages, rep(Fpc,3))"
"0","conf_namess <-c(conf_namess, conf_name)"
"0","Mc = (emp.data[currdoing,4])"
"0","Fc = (emp.data[currdoing,6])"
"0","if(Mc == 0){"
"0","  rati = Fc/1"
"0","} else if (Fc == 0){"
"0","  rati = 0.01"
"0","} else {"
"0","  rati = Fc/Mc"
"0","}"
"0","ratios <- c(ratios, rati)"
"0","shade <- c(shade, ""FRatio"")"
"0","outlist[[i]] <- emp.data"
"0","i = i + 1"
"0","}"
"0","outlist[[i]] <- empt.data"
"0","#print(outlist)"
"0","TMpc = (empt.data[currdoing,5])"
"0","TFpc = (empt.data[currdoing,7])"
"0","TNApc = (empt.data[currdoing,9])"
"0","gender = rep(c(""M"",""F"",""NA""),57)"
"0","conf_names <- c(conf_names, rep(""Total"",3))"
"0","percentages <- c(percentages, TMpc, TFpc, TNApc)"
"0","Fpercentages <- c(Fpercentages, rep(TFpc,3))"
"0","TMc = (empt.data[currdoing,4])"
"0","TFc = (empt.data[currdoing,6])"
"0","conf_namess <-c(conf_namess, ""Total"")"
"0","if(TMc == 0){"
"0","  rati = Fc/1"
"0","} else if (TFc == 0){"
"0","  rati = 0.01"
"0","} else {"
"0","  rati = TFc/TMc"
"0","}"
"0","ratios <- c(ratios, rati)"
"0","shade <- c(shade, ""GRatio"")"
"0","ratios <- c(ratios, 0.2)"
"0","shade <- c(shade, ""TRatio"")"
"0","conf_namess <-c(conf_namess, ""Graduates"")"
"0","#uncomment this section and comment out the proportion section if you want the percentage graphs"
"0","#you probably want to change the label to say ""Distribution of Gender amongst ______"", and change the file name in the ggsave line below"
"0","#be sure to change currdoing as specified in the start of this chunk"
"0","#general"
"0","title0 = paste(""Distribution of Gender amongst"", keyword, sep = "" "")"
"0","plotdata = data.frame(conf_names,gender,percentages,Fpercentages)"
"0","plotdata$conf_names <- factor(plotdata$conf_names, levels = unique(plotdata$conf_names[order(plotdata$Fpercentages)]))"
"0","outplot <-  ggplot() + geom_bar(aes(fill = gender, y = percentages, x = conf_names), data = plotdata, stat= ""identity"", position = ""fill"") + labs(title=title0, x =""Conferences"", y = ""Proportion of Genders"") + scale_y_continuous(labels = dollar_format(suffix = """", prefix = """")) + coord_flip()"
"0","#uncomment this section and comment out the general section if you want the proportion graphs"
"0","#you probably want to change the label to say ""Proportion of Gender amongst ______"", and change the file name in the ggsave line below"
"0","#be sure to change currdoing as specified in the start of this chunk"
"0","#proportion"
"0","#title0 = paste(""Proportion of Gender amongst"", keyword, sep = "" "")"
"0","  #print(conf_namess)"
"0","#plotdata = data.frame(conf_namess, ratios, shade, double_blind)"
"0","  #plotdata$conf_namess <- factor(plotdata$conf_namess, levels = unique(plotdata$conf_namess[order(plotdata$ratios)]))"
"0","#plotdata$conf_namess <- factor(plotdata$conf_namess, levels = unique(plotdata$conf_namess[order(plotdata$conf_namess)]))"
"0","#outplot <- ggplot(data = plotdata, aes(y = ratios, x = conf_namess, fill = double_blind)) + geom_bar(stat= ""identity"") + labs(title=title0, x =""Conferences"", y = ""Proportion of Genders"") + theme_minimal() + coord_flip() + scale_fill_manual(values=c(""#6db3f8"", ""#00BA38"", ""#F8766D""))"
"0","outplot"
"0","filenam = paste(""outplot"", filekey, sep = """")"
"0","filenam = paste(filenam, "".png"", sep = """")"
"0","ggsave(filenam, height = 7, limitsize = FALSE)"
"0","a = 1"
"0","heck <- c()"
"0","while (a <=171){"
"0","  blah = plotdata[a,1]"
"0","  blah = toString(blah)"
"0","  blah = paste(blah, filekey, sep = """")"
"0","  heck <- c(heck, blah)"
"0","  a = a+1"
"0","}"
"0","plotdata2 = data.frame(heck,gender,percentages)"
"0","corrplot <- c(corrplot, subset(plotdata2, gender==""F""))"
"0","currdoing = currdoing +1"
"0","}"
"2","Saving 7 x 7 in image
"
"0","while (!is.null(corrplot$gender)){"
"0","  corrplot$gender <- NULL"
"0","}"
"0","while (!is.null(corrplot$heck)){"
"0","  corrplot$heck <- NULL"
"0","}"
"0","corrframe = data.frame(corrplot)"
"0","corrframe <- corrframe[-c(57), ]"
"0","names(corrframe)[names(corrframe)==""percentages""] <- ""PC_Chairs"""
"0","names(corrframe)[names(corrframe)==""percentages.1""] <- ""PC_Members"""
"0","names(corrframe)[names(corrframe)==""percentages.2""] <- ""Session_Chairs"""
"0","names(corrframe)[names(corrframe)==""percentages.3""] <- ""Panelists"""
"0","names(corrframe)[names(corrframe)==""percentages.4""] <- ""Keynote_Speakers"""
"0","names(corrframe)[names(corrframe)==""percentages.5""] <- ""Authors"""
"0","res <- cor(corrframe, use = ""complete.obs"")"
"0","print(res)"
"1","                "
"1","   PC_Chairs"
"1","  PC_Members"
"1"," Session_Chairs"
"1","   Panelists"
"1"," Keynote_Speakers"
"1","    Authors"
"1","
PC_Chairs       "
"1","  1.00000000"
"1"," -0.11141349"
"1","     -0.2302567"
"1","  0.01641391"
"1","       0.74384601"
"1","  0.3386340"
"1","
PC_Members      "
"1"," -0.11141349"
"1","  1.00000000"
"1","      0.1638476"
"1","  0.22874949"
"1","       0.06661473"
"1","  0.1917395"
"1","
Session_Chairs  "
"1"," -0.23025666"
"1","  0.16384761"
"1","      1.0000000"
"1","  0.13434748"
"1","       0.08620840"
"1","  0.3045989"
"1","
Panelists       "
"1","  0.01641391"
"1","  0.22874949"
"1","      0.1343475"
"1","  1.00000000"
"1","      -0.22082154"
"1"," -0.1281148"
"1","
Keynote_Speakers"
"1","  0.74384601"
"1","  0.06661473"
"1","      0.0862084"
"1"," -0.22082154"
"1","       1.00000000"
"1","  0.5231173"
"1","
Authors         "
"1","  0.33863402"
"1","  0.19173954"
"1","      0.3045989"
"1"," -0.12811480"
"1","       0.52311727"
"1","  1.0000000"
"1","
"
"0","corrplot(res, tl.col = ""black"", tl.srt = 45, type = ""upper"", addCoef.col = ""gray"")"
